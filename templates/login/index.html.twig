{% extends 'base.html.twig' %}

{% block title %}Login - Health Spring{% endblock %}

{% block body %}
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-6 col-lg-4">
            <div class="card shadow mt-5">
                <div class="card-body p-5">
                    <h2 class="card-title text-center mb-4">Health Spring</h2>
                    <p class="text-center text-muted mb-4">Sign in with your SuperOffice work email and date of birth.</p>

                    {% if error %}
                        <div class="alert alert-danger">{{ error.messageKey|trans(error.messageData, 'security') }}</div>
                    {% endif %}

                    <form method="post" action="{{ path('app_login') }}">
                        <div class="mb-3">
                            <label for="email" class="form-label">Work email</label>
                            <input
                                type="email"
                                class="form-control"
                                id="email"
                                name="email"
                                required
                                autofocus
                                inputmode="email"
                                pattern=".+@superoffice\.com$"
                                placeholder="you@superoffice.com"
                            >
                            <div class="form-text">
                                Use your SuperOffice work email (must end with <strong>@superoffice.com</strong>).
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="password" class="form-label">Password (date of birth)</label>
                            <div class="input-group">
                                <input
                                    type="password"
                                    class="form-control"
                                    id="password"
                                    name="password"
                                    required
                                    inputmode="numeric"
                                    pattern="\d{4}/\d{2}/\d{2}"
                                    placeholder="1999/02/24"
                                >
                                <button type="button" class="btn btn-outline-secondary" id="toggle-password">
                                    Show
                                </button>
                            </div>
                            <div class="form-text">
                                Use your date of birth in the exact format <strong>YYYY/MM/DD</strong>,
                                numbers and slashes only. Example: <code>1999/02/24</code>.
                            </div>
                        </div>

                        <button type="submit" class="btn btn-super-action w-100">Login</button>
                    </form>

                    <div class="text-center mt-4">
                        <a href="{{ path('app_home') }}" class="text-muted">Back to Home</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
document.addEventListener('DOMContentLoaded', function () {
    const passwordInput = document.getElementById('password');
    const toggleButton = document.getElementById('toggle-password');

    if (!passwordInput || !toggleButton) {
        return;
    }

    toggleButton.addEventListener('click', function () {
        const isHidden = passwordInput.type === 'password';
        passwordInput.type = isHidden ? 'text' : 'password';
        toggleButton.textContent = isHidden ? 'Hide' : 'Show';
    });
});
</script>
{% endblock %}
